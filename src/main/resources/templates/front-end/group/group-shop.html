<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org"></html>

<head>
    <meta charset="utf-8">
    <title>團購活動平台</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">



    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link href="Group/Shan_static/css/css2.css" rel="stylesheet">

    <link href="Group/Shan_static/css/all.min.css" rel="stylesheet">
    <link href="Group/Shan_static/css/bootstrap-icons.css" rel="stylesheet">

    <link href="Group/Shan_static/css/animate.min.css" rel="stylesheet">
    <link href="Group/Shan_static/css/owl.carousel.min.css" rel="stylesheet">

    <link href="Group/Shan_static/css/bootstrap.min.css" rel="stylesheet">

    <link href="Group/Shan_static/css/style.css" rel="stylesheet">

    <!-- 內容CSS -->
    <!-- <link rel="stylesheet" href="assets/css/vendor/bootstrap.min.css"> -->
    <link rel="stylesheet" href="Group/Shan_assets/css/vendor/font.awesome.min.css">
    <link rel="stylesheet" href="Group/Shan_assets/css/vendor/ionicons.min.css">
    <link rel="stylesheet" href="Group/Shan_assets/css/plugins/nice-select.min.css">
    <link rel="stylesheet" href="Group/Shan_assets/css/style.css">
</head>

<body>
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-grow text-primary" role="status"></div>
    </div>


    <!-- 頁首 -->
    <div th:insert="front-end/components/Header :: #header-div"></div>

    <!-- 導覽列 -->
    <div th:insert="front-end/components/NavBar :: #nav-bar"></div>


    <div class="col-lg-9 col-12 col-custom widget-mt">
        <!--shop toolbar start-->
        <div class="shop_toolbar_wrapper">
            <div class="shop_toolbar_btn">
                <button data-role="grid_3" type="button" class="active btn-grid-3" data-toggle="tooltip"
                    title="">縮圖</button>
                <!-- <button data-role="grid_4" type="button" class=" btn-grid-4" data-toggle="tooltip" title="4"></button> -->
                <button data-role="grid_list" type="button" class="btn-list" data-toggle="tooltip" title="">清單</button>
            </div>
            <div>
                <input type="search" placeholder="搜尋團購活動" id="searchgroupName">
                <button type="button" id="gotosearch">搜尋</button>
            </div>
            <div class="shop-select">
                <form class="d-flex flex-column w-100" action="#">
                    <div class="form-group">
                        <select class="form-control nice-select w-100">
                            <option selected value="0">預設排序</option>
                            <option value="1">價格高到低</option>
                            <option value="2">價格低到高</option>
                            <option value="3">截止日期高到低</option>
                            <option value="4">截止日期低到高</option>
                            <option value="5">參加人數高到低</option>
                            <option value="6">參加人數低到高</option>
                        </select>
                    </div>
                </form>
            </div>
        </div>
        <!--shop toolbar end-->
        <!-- Shop Wrapper Start -->
        <div class="row shop_wrapper grid_3" id="allactivity">
            
        </div>
        <!-- Shop Wrapper End -->
        <!-- Bottom Toolbar Start -->
        <div class="row">
            <div class="col-sm-12 col-custom">
                <div class="toolbar-bottom mt-30">
                    <nav class="pagination pagination-wrap mb-10 mb-sm-0">
                        <ul class="pagination">
                            <li class="disabled prev">
                                Left
                            </li>
                            <li class="active"><a>1</a></li>
                            <li>
                                <a href="#">2</a>
                            </li>
                            <li class="next">
                                <a href="#" title="Next >>">Next</a>
                            </li>
                        </ul>
                    </nav>
                    <p class="desc-content text-center text-sm-right">Showing 1 - 12 of 34 result</p>
                </div>
            </div>
        </div>
        <!-- Bottom Toolbar End -->
    </div>


    <!-- 頁腳 -->
    <div th:insert="front-end/components/Footer :: #footer-div"></div>

    <!-- 版權所有 -->
    <div th:insert="front-end/components/Copyright :: #copyright-div"></div>

    
    <script data-cfasync="false" src="Group/Shan_static/js/email-decode.min.js"></script>
    <!-- <script src="static/js/jquery-3.4.1.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script> -->
    <script src="Group/Shan_static/js/bootstrap.bundle.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="Group/Shan_static/js/wow.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="Group/Shan_static/js/easing.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="Group/Shan_static/js/waypoints.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="Group/Shan_static/js/counterup.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="Group/Shan_static/js/owl.carousel.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>

    <script src="Group/Shan_static/js/main.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="Group/Shan_static/js/rocket-loader.min.js" data-cf-settings="0080e6b992b21508d4c0eeae-|49" defer=""></script>

    <!-- jQuery JS -->
    <script src="Group/Shan_assets/js/vendor/jquery-3.5.1.min.js"></script>
    <!-- jQuery Migrate JS -->
    <script src="Group/Shan_assets/js/vendor/jQuery-migrate-3.3.0.min.js"></script>
    <!-- Modernizer JS -->
    <script src="Group/Shan_assets/js/vendor/modernizr-2.8.3.min.js"></script>
    <!-- Bootstrap JS -->
    <!-- <script src="assets/js/vendor/bootstrap.bundle.min.js"></script> -->
    <!-- Slick Slider JS -->
    <script src="Group/Shan_assets/js/plugins/slick.min.js"></script>
    <!-- Countdown JS -->
    <script src="Group/Shan_assets/js/plugins/jquery.countdown.min.js"></script>
    <!-- Ajax JS -->
    <script src="Group/Shan_assets/js/plugins/jquery.ajaxchimp.min.js"></script>
    <!-- Jquery Nice Select JS -->
    <script src="Group/Shan_assets/js/plugins/jquery.nice-select.min.js"></script>
    <!-- Jquery Ui JS -->
    <script src="Group/Shan_assets/js/plugins/jquery-ui.min.js"></script>
    <!-- jquery magnific popup js -->
    <script src="Group/Shan_assets/js/plugins/jquery.magnific-popup.min.js"></script>

    <!-- Main JS -->
    <script src="Group/Shan_assets/js/main.js"></script>

    <script>
        showlist()
        window.addEventListener("load", function () {
        })

        function showlist() {
            $.ajax({
                url: "/group-shop/showActivityList",
                type: "GET",
                success: function (response) {
                    let texts = "";                   
                    for (let gvo in response) {
                        let text = `<div class="col-md-6 col-sm-6 col-lg-4 col-custom product-area">
                <div class="single-product position-relative">
                    <div class="product-image">
                        <a class="d-block" href="/single-product?groupActivityId=${response[gvo].groupActivityId}">
                            <img src="/groupProduct/get/img/${response[gvo].groupProductId}" alt="" class="product-image-1 w-100">
                        </a>
                    </div>
                    <div class="product-content">

                        <div class="product-title">
                            <h4 class="title-2"> <a href="/single-product?groupActivityId=${response[gvo].groupActivityId}" style="padding: 10px;">${response[gvo].groupName}</a></h4>
                        </div>
                        <div class="price-box">
                            <span class="regular-price ">NT$${response[gvo].groupActivityPrice}</span>
                            <span class="old-price"><del>NT$${response[gvo].groupProductPrice}</del></span>
                        </div>
                    </div>
                    <div class="add-action d-flex position-absolute">
                        <a href="/group-product/Checkout?groupActivityId=${response[gvo].groupActivityId}&groupActivityPrice=${response[gvo].groupActivityPrice}" title="">
                            <button>參加團購</button>
                        </a>

                    </div>
                    <div class="product-content-listview">

                        <div class="product-title">
                            <h4 class="title-2"> <a href="/single-product?groupActivityId=${response[gvo].groupActivityId}">${response[gvo].groupName}</a></h4>
                        </div>
                        <div>
                            <p>團購開始時間:${response[gvo].groupOrderStar}
                                <br>
                                團購結束時間:${response[gvo].groupOrderEnd}
                                <br>
                                成團達標數:${response[gvo].groupOrderMin}
                                <br>
                                已參加人數:${response[gvo].groupDetailCount}
                            </p>
                        </div>
                        <div class="price-box">
                            <span class="regular-price ">NT$${response[gvo].groupActivityPrice}</span>
                            <span class="old-price"><del>NT$${response[gvo].groupProductPrice}</del></span>
                        </div>
                        <div class="add-action-listview d-flex">
                            <a href="/group-product/Checkout?groupActivityId=${response[gvo].groupActivityId}&groupActivityPrice=${response[gvo].groupActivityPrice}">
                                <button>參加團購</button>
                            </a>
                            </div>
                            <p class="desc-content">
                                ${response[gvo].groupActivityContent}
                                </p>
                                </div>
                                </div>
                                </div>`;
                                texts += text;
                            }
                            $("#allactivity").html(texts);
                        }
                    })
                }
                //這是form版本的參加團購按鈕
                // <form action="/group-product/Checkout" method="get">
                //     <input type="text" name="groupActivityId" value="${response[gvo].groupActivityId}" hidden>
                //     <input type="text" name="groupActivityPrice" value="${response[gvo].groupActivityPrice}" hidden>
                //     <button type="submit">參加團購</button>
                // </form>

                $("#gotosearch").click(function() {
                    $.ajax({
                        url: "/group-activity/Search",
                        method: "POST",
                        data: { groupName: $("#searchgroupName").val() },
                        success: function (response) {
                            if (response == "") {
                                alert("查無資料");
                            }else {
                                let texts = "";                   
                                for (let gvo in response) {
                                    let text = `<div class="col-md-6 col-sm-6 col-lg-4 col-custom product-area">
                            <div class="single-product position-relative">
                                <div class="product-image">
                                    <a class="d-block" href="/single-product?groupActivityId=${response[gvo].groupActivityId}">
                                        <img src="/groupProduct/get/img/${response[gvo].groupProductId}" alt="" class="product-image-1 w-100">
                                    </a>
                                </div>
                                <div class="product-content">

                                    <div class="product-title">
                                        <h4 class="title-2"> <a href="/single-product?groupActivityId=${response[gvo].groupActivityId}" style="padding: 10px;">${response[gvo].groupName}</a></h4>
                                    </div>
                                    <div class="price-box">
                                        <span class="regular-price ">NT$${response[gvo].groupActivityPrice}</span>
                                        <span class="old-price"><del>NT$${response[gvo].groupProductPrice}</del></span>
                                    </div>
                                </div>
                                <div class="add-action d-flex position-absolute">
                                    <a href="/group-product/Checkout?groupActivityId=${response[gvo].groupActivityId}&groupActivityPrice=${response[gvo].groupActivityPrice}" title="">
                                        <button>參加團購</button>
                                    </a>

                                </div>
                                <div class="product-content-listview">

                                    <div class="product-title">
                                        <h4 class="title-2"> <a href="/single-product?groupActivityId=${response[gvo].groupActivityId}">${response[gvo].groupName}</a></h4>
                                    </div>
                                    <div>
                                        <p>團購開始時間:${response[gvo].groupOrderStar}
                                            <br>
                                            團購結束時間:${response[gvo].groupOrderEnd}
                                            <br>
                                            成團達標數:${response[gvo].groupOrderMin}
                                            <br>
                                            已參加人數:${response[gvo].groupDetailCount}
                                        </p>
                                    </div>
                                    <div class="price-box">
                                        <span class="regular-price ">NT$${response[gvo].groupActivityPrice}</span>
                                        <span class="old-price"><del>NT$${response[gvo].groupProductPrice}</del></span>
                                    </div>
                                    <div class="add-action-listview d-flex">
                                        <a href="/group-product/Checkout?groupActivityId=${response[gvo].groupActivityId}&groupActivityPrice=${response[gvo].groupActivityPrice}">
                                            <button>參加團購</button>
                                        </a>
                                        </div>
                                        <p class="desc-content">
                                            ${response[gvo].groupActivityContent}
                                            </p>
                                            </div>
                                            </div>
                                            </div>`;
                                            texts += text;
                                        }
                                        $("#allactivity").html(texts);
                                        }
                                    
                        },
                        error: function (error) {

                        }
                    });
                })
    </script>
</body>

</html>