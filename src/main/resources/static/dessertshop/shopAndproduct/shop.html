<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Goûter</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />

    <link rel="stylesheet" href="style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link href="static/css/css2.css" rel="stylesheet">

    <link href="static/css/all.min.css" rel="stylesheet">
    <link href="static/css/bootstrap-icons.css" rel="stylesheet">

    <link href="static/css/animate.min.css" rel="stylesheet">
    <link href="static/css/owl.carousel.min.css" rel="stylesheet">

    <link href="static/css/bootstrap.min.css" rel="stylesheet">

    <link href="static/css/style.css" rel="stylesheet">
</head>

<body>
    <!-- header -->
    <!-- #header -->
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-grow text-primary" role="status"></div>
    </div>


   <div id="header-div"></div>
   <div id="nav-div"></div>


    <!-- 中間橫幅 -->
    <section id="page-header">

        <h2>#甜點商城</h2>

        <p>裡面有很多好吃的ㄛ</p>

    </section>



    <!-- 甜點頁 -->
    <section id="product1" class="section-p1">
        <div class="pro-container" id="mainfrontshop">


<!--            第一件-->
            <div class="pro" onclick="window.location.href='sproduct.html';">
                <img src="img/products/1-1.jpg" alt="">
                <div class="des">
                    <span>甜點商城</span>
                    <h5>法式巧克力千層蛋糕</h5>
                    <div class="star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <h4>NT$380</h4>
                </div>
                <a href><i class="fal fa-shopping-cart cart" onclick="addtocart(${res[e].dessertId})"></i></a>
            </div>



<!--            &lt;!&ndash; 第二件 &ndash;&gt;-->
<!--            <div class="pro" onclick="window.location.href='sproduct2.html';">-->
<!--                <img src="img/products/2-1.jpg" alt="">-->
<!--                <div class="des">-->
<!--                    <span>甜點商城</span>-->
<!--                    <h5>蒙布朗</h5>-->
<!--                    <div class="star">-->
<!--                        <i class="fas fa-star"></i>-->
<!--                        <i class="fas fa-star"></i>-->
<!--                        <i class="fas fa-star"></i>-->
<!--                        <i class="fas fa-star"></i>-->
<!--                        <i class="fas fa-star"></i>-->
<!--                    </div>-->
<!--                    <h4>NT$290</h4>-->
<!--                </div>-->
<!--                &lt;!&ndash; <a href="#"><i class="fal fa-shopping-cart cart"></i></a> &ndash;&gt;-->
<!--            </div>-->

        

        </div>
    </section>

    <!-- 換頁按鈕 -->
<!--    <section id="pagination" class="section-p1">-->
<!--        <a href="#">1</a>-->
<!--        <a href="#">2</a>-->
<!--        <a href="#"><i class="fal fa-long-arrow-alt-right"></i></a>-->
<!--    </section>-->





    <!-- footer------------------------------------------------------------------------------------------------- -->
    <div id="footer-div"></div>

    <div id="copyright-div"></div>





<!--     -------------------------------------------------------------------------------------------------------------------------------------------->

    <!-- 共用頭尾 -->
    <script src="/Conponents/front_end.js"></script>



    <script data-cfasync="false" src="static/js/email-decode.min.js"></script>
    <script src="static/js/jquery-3.4.1.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/bootstrap.bundle.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/wow.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/easing.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/waypoints.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/counterup.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/owl.carousel.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>

    <script src="static/js/main.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/rocket-loader.min.js" data-cf-settings="0080e6b992b21508d4c0eeae-|49" defer=""></script>
    <!-- ------------------------------------------------------------------------------------------------------- -->
    <script src="script.js"></script>
    <!-- ------------------------------------------------------------------------------------------------------- -->







    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js" integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        <!-- 跳轉頁面同時傳參數函式 -->
        function redirectToSProduct(param) {
            let url = 'sproduct.html?param=' + encodeURIComponent(param);
            window.location.href = url;
        }

        <!-- getall -->
        $(document).ready(findAll());
        function findAll(){
            $.ajax({
                url: '/dessert5front/findall',
                type: 'GET',
                success: function(res){
                    console.log(res);
                    let html = "";
                    for (let e in res) {
                        // let dessertId = res[e].dessertId;
                        if (res[e].dessertStatus === "已下架") {
                            continue;
                        }
                        html += `<div class="pro" onclick="redirectToSProduct(${res[e].dessertId})" style="margin-left: 13px; margin-right: 13px;">
                                    <img src="/dessert5/image0?dessertId=${res[e].dessertId}" alt="">
                                    <div class="des">
                                        <span>甜點商城</span>
                                        <h5>${res[e].dessertName}</h5>
                                        <div class="star">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                        <h4>NT$${res[e].dessertPrice}</h4>
                                    </div>
                                    <a href="#" onclick="event.stopPropagation(); addtocart(${res[e].dessertId})"<i class="fal fa-shopping-cart cart"></i></a>
                                </div>`;

                    }
                    $("#mainfrontshop").html(html);
                },
                error: function(xhr, textStatus, errorThrown) {
                    console.error(xhr);
                }
            })
        }

        // 加入購物車，並檢查登入
        function addtocart(dessertId) {
            $.ajax({
                url: '/dessert5front/addtocartshop?dessertId='+ dessertId,
                type: 'GET',
                success: function(res) {
                    console.log(res);
                    if (res == "/login") {
                        window.location.href = res;
                    } else {
                        window.alert(res);
                    }
                }
            });

        }
    </script>




</body>

</html>