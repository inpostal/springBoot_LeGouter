<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Goûter</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />

    <link rel="stylesheet" href="style.css">


    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link href="static/css/css2.css" rel="stylesheet">

    <link href="static/css/all.min.css" rel="stylesheet">
    <link href="static/css/bootstrap-icons.css" rel="stylesheet">

    <link href="static/css/animate.min.css" rel="stylesheet">
    <link href="static/css/owl.carousel.min.css" rel="stylesheet">

    <link href="static/css/bootstrap.min.css" rel="stylesheet">

    <link href="static/css/style.css" rel="stylesheet">
</head>
<style>
    .px-lg-5 {
        background-color: #1E1916;
    }

</style>

<body>

    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-grow text-primary" role="status"></div>
    </div>


    <div id="header-div"></div>


    <div id="nav-div"></div>

<!-- 主要內容 ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->

    <section id="prodetails" class="section-p1">
        <div class="single-pro-image">
            <img src="img/products/1-1.jpg" width="100%" id="MainImg" alt="">

            <div class="small-img-group">
                <div class="small-img-col">
                    <img src="img/products/1-1.jpg" width="100%" class="small-img" alt="">
                </div>
                <div class="small-img-col">
                    <img src="img/products/1-2.jpg" width="100%" class="small-img" alt="">
                </div>
                <div class="small-img-col">
                    <img src="img/products/1-3.jpg" width="100%" class="small-img" alt="">
                </div>
                <div class="small-img-col">
                    <img src="img/products/1-4.jpg" width="100%" class="small-img" alt="">
                </div>
            </div>
        </div>

        <div class="single-pro-details">
            <h6>甜點商城</h6>
            <h4>法式巧克力千層蛋糕</h4>
            <h2>NT$380</h2>
            <!-- <select>
                <option>選擇口味</option>
                <option>焦糖</option>
                <option>巧克力</option>
                <option>草莓</option>
                <option>覆盆子</option>
            </select> -->
            <div><button id="addtolovelist" class="normal" style="border: 2px; padding: 10px 10px 10px 0; background-color: white; color:#1E1916">加入追蹤清單</button></div>
            <button class="normal" onmouseover="this.style.background='#c90c0c';" onmouseout="this.style.background='#1E1916'">加入購物車</button>
            <h4>Product Details</h4>
            <span>
                超過20層的手工法式薄餅，層層散發香濃的可可氣息，滑順柔和的巧克力鮮奶油如同絲絨般高貴典雅，頂端以口感溫和的苦甜巧克力點綴，堆疊出精巧細膩的美妙滋味。
            </span>
        </div>
    </section>

<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
    <div id="footer-div"></div>
    <div id="copyright-div"></div>

<!-- ---------------------------------------------------------------------------------------------------------------------------------------- -->
    <!-- 共用頭尾 -->
    <script src="/Conponents/front_end.js"></script>

<!-- ---------------------------------------------------------------------------------------------------------------------------------------- -->
    <script data-cfasync="false" src="static/js/email-decode.min.js"></script>
    <script src="static/js/jquery-3.4.1.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/bootstrap.bundle.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/wow.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/easing.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/waypoints.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/counterup.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/owl.carousel.min.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>

    <script src="static/js/main.js" type="0080e6b992b21508d4c0eeae-text/javascript"></script>
    <script src="static/js/rocket-loader.min.js" data-cf-settings="0080e6b992b21508d4c0eeae-|49" defer=""></script>


<!-- --------------------------------------------------------------------------------------------------------------------------------------- -->


    <!-- 顯示內容 -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js" integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>

        $(document).ready(getAllContent());
        function getAllContent(){
            // 取得主頁傳過來的參數
            let param = new URLSearchParams(window.location.search);
            let dessertId = param.get('param');
            console.log(dessertId);

            // 生成內容
            $.ajax({
                url: '/dessert5front/getallcontent?dessertId='+ dessertId,
                type: 'GET',
                success: function(res){
                    console.log(res);
                    let html = `<div class="single-pro-image">
                                    <img src="/dessert5/image0?dessertId=${dessertId}" width="100%" id="MainImg" alt="">
                                    <div class="small-img-group">
                                        <div class="small-img-col">
                                            <img src="/dessert5/image0?dessertId=${dessertId}" width="100%" class="small-img" alt="">
                                        </div>
                                        <div class="small-img-col">
                                            <img src="/dessert5/image1?dessertId=${dessertId}" width="100%" class="small-img" alt="">
                                        </div>
                                        <div class="small-img-col">
                                            <img src="/dessert5/image2?dessertId=${dessertId}" width="100%" class="small-img" alt="">
                                        </div>
                                        <div class="small-img-col">
                                            <img src="/dessert5/image3?dessertId=${dessertId}" width="100%" class="small-img" alt="">
                                        </div>
                                    </div>
                                </div>

                                <div class="single-pro-details">
                                    <h6>甜點商城</h6>
                                    <h4>${res.dessertName}</h4>
                                    <h2>NT$${res.dessertPrice}</h2>
                                    <div><button class="normal" style="border: 2px; padding: 10px 10px 10px 0; background-color: white; color:#1E1916;" onmouseover="this.style.color='red';" onmouseout="this.style.color='#1E1916'" id="addtolovelist">加入追蹤清單</button></div>
<!--                                    <input type="number" value="1">-->
                                    <button class="normal" id="addtocart" onmouseover="this.style.background='#c90c0c';" onmouseout="this.style.background='#1E1916'">加入購物車</button>
                                    <h4>Product Details</h4>
                                    <span>
                                        ${res.dessertContent}
                                    </span>
                                </div>`;

                    $("#prodetails").html(html);

                    let MainImg = document.getElementById("MainImg");
                    let smallimg = document.getElementsByClassName("small-img");

                    smallimg[0].onclick = function () {
                        MainImg.src = smallimg[0].src;
                    }
                    smallimg[1].onclick = function () {
                        MainImg.src = smallimg[1].src;
                    }
                    smallimg[2].onclick = function () {
                        MainImg.src = smallimg[2].src;
                    }
                    smallimg[3].onclick = function () {
                        MainImg.src = smallimg[3].src;
                    }

                    // 加入購物車，並檢查登入
                    $("#addtocart").on("click", function(){
                        $.ajax({
                            url: '/dessert5front/addtocart?dessertId='+ dessertId,
                            type: 'GET',
                            success: function(res) {
                                console.log(res);
                                if (res == "/login") {
                                    window.location.href = res;
                                } else {
                                window.alert(res);
                                }
                            }
                        });
                    });

                    // 加入追蹤清單，並檢查登入
                    $("#addtolovelist").on("click", function(){
                        $.ajax({
                            url: '/dessert5front/addtolovelist?dessertId='+ dessertId,
                            type: 'GET',
                            success: function(res){
                                console.log(res);
                                if (res == "/login"){
                                    window.location.href = res;
                                } else{
                                    window.alert(res);
                                }
                            }
                        });
                    });











                },
                error: function(xhr, textStatus, errorThrown) {
                    console.error(xhr);
                }
            })
        }
    </script>

    <script src="script.js"></script>

</body>

</html>